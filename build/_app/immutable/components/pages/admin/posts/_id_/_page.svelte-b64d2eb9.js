import{S as v,i as x,s as N,w as J,a as $,k as y,q as S,x as L,c as T,l as g,m as P,r as k,h as d,n as c,y as O,b as _,J as w,P as D,f as U,t as j,z as q,D as A}from"../../../../../chunks/index-dd4a8c05.js";import{E as B,M as C,g as I}from"../../../../../chunks/editor-746a7095.js";import{n as E}from"../../../../../chunks/notifications-677698c9.js";function M(o){let n,l,s,p,r,i,e,m,f,h,b;return n=new B({props:{source:o[1],mode:C.PREVIEW,height:"full",onSave:o[2]}}),{c(){J(n.$$.fragment),l=$(),s=y("button"),p=S("Delete"),r=$(),i=y("label"),e=y("input"),m=S("Published"),this.h()},l(t){L(n.$$.fragment,t),l=T(t),s=g(t,"BUTTON",{type:!0,class:!0});var a=P(s);p=k(a,"Delete"),a.forEach(d),r=T(t),i=g(t,"LABEL",{for:!0});var u=P(i);e=g(u,"INPUT",{type:!0,name:!0,id:!0,class:!0}),m=k(u,"Published"),u.forEach(d),this.h()},h(){c(s,"type","button"),c(s,"class","button-danger"),c(e,"type","checkbox"),c(e,"name","published"),c(e,"id","published"),c(e,"class","mx-2"),c(i,"for","published")},m(t,a){O(n,t,a),_(t,l,a),_(t,s,a),w(s,p),_(t,r,a),_(t,i,a),w(i,e),e.checked=o[0],w(i,m),f=!0,h||(b=[D(s,"click",o[3]),D(e,"change",o[5])],h=!0)},p(t,[a]){a&1&&(e.checked=t[0])},i(t){f||(U(n.$$.fragment,t),f=!0)},o(t){j(n.$$.fragment,t),f=!1},d(t){q(n,t),t&&d(l),t&&d(s),t&&d(r),t&&d(i),h=!1,A(b)}}}function z(o,n,l){let{data:s}=n,{id:p,content:r,title:i,published:e}=s;const m={name:i,value:r!=null?r:""},f=async({name:t,value:a})=>{const u=await fetch("/api/posts",{method:"PATCH",body:JSON.stringify({id:p,title:t,content:a,published:e}),headers:{"content-type":"application/json"}});if(u.status>299){E.warning(`Something went wrong: ${u.status} ${u.statusText}`);return}E.success("Success!")},h=async()=>{if(window.confirm("Delete this post? This is non recoverable")){const t=await fetch("/api/posts/",{method:"DELETE",body:JSON.stringify({id:p}),headers:{"content-type":"application/json"}});if(t.status>299){E.warning(`Something went wrong: ${t.status} ${t.statusText}`);return}I("/admin/posts");return}};function b(){e=this.checked,l(0,e)}return o.$$set=t=>{"data"in t&&l(4,s=t.data)},[e,m,f,h,s,b]}class W extends v{constructor(n){super(),x(this,n,z,M,N,{data:4})}}export{W as default};
