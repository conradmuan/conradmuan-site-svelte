import{S as y,i as g,s as w,w as $,a as b,k as E,q as S,x as T,c as x,l as D,m as v,r as J,h as f,n as p,y as N,b as h,J as O,Q as P,B as j,f as k,t as q,z as B}from"../../../../../../chunks/index-82ccb513.js";import{g as C}from"../../../../../../chunks/navigation-f413a2af.js";import{E as M,M as U}from"../../../../../../chunks/editor-a487e5ab.js";import{n as d}from"../../../../../../chunks/notifications-54babbdf.js";function z(i){let s,r,e,c,l,o,u;return s=new M({props:{source:i[0],mode:U.PREVIEW,onSave:i[1]}}),{c(){$(s.$$.fragment),r=b(),e=E("button"),c=S("Delete"),this.h()},l(t){T(s.$$.fragment,t),r=x(t),e=D(t,"BUTTON",{type:!0,class:!0});var a=v(e);c=J(a,"Delete"),a.forEach(f),this.h()},h(){p(e,"type","button"),p(e,"class","button-danger")},m(t,a){N(s,t,a),h(t,r,a),h(t,e,a),O(e,c),l=!0,o||(u=P(e,"click",i[2]),o=!0)},p:j,i(t){l||(k(s.$$.fragment,t),l=!0)},o(t){q(s.$$.fragment,t),l=!1},d(t){B(s,t),t&&f(r),t&&f(e),o=!1,u()}}}function A(i,s,r){let{data:e}=s;const{id:c,name:l,value:o}=e,u={name:l,value:o!=null?o:""},t=async({name:n,value:_})=>{const m=await fetch("/api/fields",{method:"PATCH",body:JSON.stringify({id:c,name:n,value:_}),headers:{"content-type":"application/json"}});if(m.status>299){d.warning(`Something went wrong: ${m.status} ${m.statusText}`);return}d.success("Success")},a=async()=>{if(window.confirm("Delete this field? This is non recoverable")){const n=await fetch("/api/fields/",{method:"DELETE",body:JSON.stringify({id:c}),headers:{"content-type":"application/json"}});if(n.status>299){d.warning(`Something went wrong: ${n.status} ${n.statusText}`);return}C("/admin/fields");return}};return i.$$set=n=>{"data"in n&&r(3,e=n.data)},[u,t,a,e]}class R extends y{constructor(s){super(),g(this,s,A,z,w,{data:3})}}export{R as default};
