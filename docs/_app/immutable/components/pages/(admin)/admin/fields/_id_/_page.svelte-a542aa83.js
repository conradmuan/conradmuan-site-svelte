import{S as y,i as g,s as w,w as $,a as b,k as E,q as S,x as T,c as x,l as D,m as v,r as P,h as m,n as p,y as J,b as h,J as N,P as O,B as j,f as k,t as q,z as B}from"../../../../../../chunks/index-ca645e50.js";import{E as C,M,g as U}from"../../../../../../chunks/editor-f9cba76a.js";import{n as d}from"../../../../../../chunks/notifications-fced0cb7.js";function z(i){let s,r,e,c,l,o,u;return s=new C({props:{source:i[0],mode:M.PREVIEW,onSave:i[1]}}),{c(){$(s.$$.fragment),r=b(),e=E("button"),c=S("Delete"),this.h()},l(t){T(s.$$.fragment,t),r=x(t),e=D(t,"BUTTON",{type:!0,class:!0});var a=v(e);c=P(a,"Delete"),a.forEach(m),this.h()},h(){p(e,"type","button"),p(e,"class","button-danger")},m(t,a){J(s,t,a),h(t,r,a),h(t,e,a),N(e,c),l=!0,o||(u=O(e,"click",i[2]),o=!0)},p:j,i(t){l||(k(s.$$.fragment,t),l=!0)},o(t){q(s.$$.fragment,t),l=!1},d(t){B(s,t),t&&m(r),t&&m(e),o=!1,u()}}}function A(i,s,r){let{data:e}=s;const{id:c,name:l,value:o}=e,u={name:l,value:o!=null?o:""},t=async({name:n,value:_})=>{const f=await fetch("/api/fields",{method:"PATCH",body:JSON.stringify({id:c,name:n,value:_}),headers:{"content-type":"application/json"}});if(f.status>299){d.warning(`Something went wrong: ${f.status} ${f.statusText}`);return}d.success("Success")},a=async()=>{if(window.confirm("Delete this field? This is non recoverable")){const n=await fetch("/api/fields/",{method:"DELETE",body:JSON.stringify({id:c}),headers:{"content-type":"application/json"}});if(n.status>299){d.warning(`Something went wrong: ${n.status} ${n.statusText}`);return}U("/admin/fields");return}};return i.$$set=n=>{"data"in n&&r(3,e=n.data)},[u,t,a,e]}class R extends y{constructor(s){super(),g(this,s,A,z,w,{data:3})}}export{R as default};
