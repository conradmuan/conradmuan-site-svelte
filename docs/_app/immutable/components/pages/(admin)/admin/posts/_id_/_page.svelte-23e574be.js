import{S as N,i as J,s as L,w as O,a as S,k as g,q as T,x as U,c as k,l as w,m as D,r as P,h as f,n as u,y as j,b as _,J as E,Q as v,f as q,t as A,z as B,D as C}from"../../../../../../chunks/index-3920adb6.js";import{g as I}from"../../../../../../chunks/navigation-10255f91.js";import{E as M,M as z}from"../../../../../../chunks/editor-1870d9d4.js";import{n as $}from"../../../../../../chunks/notifications-a67c5355.js";function H(o){let n,l,a,c,r,i,s,m,p,d,b;return n=new M({props:{source:o[1],mode:z.PREVIEW,height:"full",onSave:o[2]}}),{c(){O(n.$$.fragment),l=S(),a=g("button"),c=T("Delete"),r=S(),i=g("label"),s=g("input"),m=T("Published"),this.h()},l(t){U(n.$$.fragment,t),l=k(t),a=w(t,"BUTTON",{type:!0,class:!0});var e=D(a);c=P(e,"Delete"),e.forEach(f),r=k(t),i=w(t,"LABEL",{for:!0});var h=D(i);s=w(h,"INPUT",{type:!0,name:!0,id:!0,class:!0}),m=P(h,"Published"),h.forEach(f),this.h()},h(){u(a,"type","button"),u(a,"class","button-danger"),u(s,"type","checkbox"),u(s,"name","published"),u(s,"id","published"),u(s,"class","mx-2"),u(i,"for","published")},m(t,e){j(n,t,e),_(t,l,e),_(t,a,e),E(a,c),_(t,r,e),_(t,i,e),E(i,s),s.checked=o[0],E(i,m),p=!0,d||(b=[v(a,"click",o[3]),v(s,"change",o[5])],d=!0)},p(t,[e]){e&1&&(s.checked=t[0])},i(t){p||(q(n.$$.fragment,t),p=!0)},o(t){A(n.$$.fragment,t),p=!1},d(t){B(n,t),t&&f(l),t&&f(a),t&&f(r),t&&f(i),d=!1,C(b)}}}function Q(o,n,l){let{data:a}=n,{id:c,content:r,title:i,published:s,slug:m}=a;const p={name:i,value:r!=null?r:"",slug:m},d=async({name:e,value:h,slug:x})=>{const y=await fetch("/api/posts",{method:"PATCH",body:JSON.stringify({id:c,title:e,content:h,slug:x,published:s}),headers:{"content-type":"application/json"}});if(y.status>299){$.warning(`Something went wrong: ${y.status} ${y.statusText}`);return}$.success("Success!")},b=async()=>{if(window.confirm("Delete this post? This is non recoverable")){const e=await fetch("/api/posts/",{method:"DELETE",body:JSON.stringify({id:c}),headers:{"content-type":"application/json"}});if(e.status>299){$.warning(`Something went wrong: ${e.status} ${e.statusText}`);return}I("/admin/posts");return}};function t(){s=this.checked,l(0,s)}return o.$$set=e=>{"data"in e&&l(4,a=e.data)},[s,p,d,b,a,t]}class G extends N{constructor(n){super(),J(this,n,Q,H,L,{data:4})}}export{G as default};
