import{S as be,i as pe,s as ke,k as g,q as I,a as S,e as q,l as E,m as w,r as N,h,c as T,n as v,b as y,J as u,B as $,L as ve,P as x,Q as ge,u as H,R as _e,T as de}from"../../../../../chunks/index-82ccb513.js";import{n as U}from"../../../../../chunks/notifications-54babbdf.js";function ee(a,e,s){const t=a.slice();return t[5]=e[s],t[7]=s,t}function te(a,e,s){const t=a.slice();return t[8]=e[s],t}function le(a,e,s){const t=a.slice();return t[11]=e[s],t}function ie(a){let e,s=a[0],t=[];for(let n=0;n<s.length;n+=1)t[n]=ue(ee(a,s,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=q()},l(n){for(let o=0;o<t.length;o+=1)t[o].l(n);e=q()},m(n,o){for(let i=0;i<t.length;i+=1)t[i].m(n,o);y(n,e,o)},p(n,o){if(o&7){s=n[0];let i;for(i=0;i<s.length;i+=1){const l=ee(n,s,i);t[i]?t[i].p(l,o):(t[i]=ue(l),t[i].c(),t[i].m(e.parentNode,e))}for(;i<t.length;i+=1)t[i].d(1);t.length=s.length}},d(n){ve(t,n),n&&h(e)}}}function se(a){let e,s=a[5].subtitle+"",t;return{c(){e=g("h2"),t=I(s),this.h()},l(n){e=E(n,"H2",{class:!0});var o=w(e);t=N(o,s),o.forEach(h),this.h()},h(){v(e,"class","mb-2 font-bold")},m(n,o){y(n,e,o),u(e,t)},p(n,o){o&1&&s!==(s=n[5].subtitle+"")&&H(t,s)},d(n){n&&h(e)}}}function oe(a){let e,s,t=[],n=new Map,o=a[5].authors;const i=l=>l[11].id;for(let l=0;l<o.length;l+=1){let f=le(a,o,l),r=i(f);n.set(r,t[l]=ae(r,f))}return{c(){e=g("h3"),s=I(`By:
						`);for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=E(l,"H3",{class:!0});var f=w(e);s=N(f,`By:
						`);for(let r=0;r<t.length;r+=1)t[r].l(f);f.forEach(h),this.h()},h(){v(e,"class","mb-2")},m(l,f){y(l,e,f),u(e,s);for(let r=0;r<t.length;r+=1)t[r].m(e,null)},p(l,f){f&3&&(o=l[5].authors,t=_e(t,f,i,1,l,o,n,e,de,ae,null,le))},d(l){l&&h(e);for(let f=0;f<t.length;f+=1)t[f].d()}}}function ne(a){let e;return{c(){e=I(",")},l(s){e=N(s,",")},m(s,t){y(s,e,t)},d(s){s&&h(e)}}}function ae(a,e){let s=e[11].author.name+"",t,n=!e[1](e[0],e[7]),o,i=n&&ne();return{key:a,first:null,c(){t=I(s),i&&i.c(),o=q(),this.h()},l(l){t=N(l,s),i&&i.l(l),o=q(),this.h()},h(){this.first=t},m(l,f){y(l,t,f),i&&i.m(l,f),y(l,o,f)},p(l,f){e=l,f&1&&s!==(s=e[11].author.name+"")&&H(t,s),f&1&&(n=!e[1](e[0],e[7])),n?i||(i=ne(),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d(l){l&&h(t),i&&i.d(l),l&&h(o)}}}function fe(a){let e,s=a[5].description+"",t;return{c(){e=g("p"),t=I(s),this.h()},l(n){e=E(n,"P",{class:!0});var o=w(e);t=N(o,s),o.forEach(h),this.h()},h(){v(e,"class","mb-2")},m(n,o){y(n,e,o),u(e,t)},p(n,o){o&1&&s!==(s=n[5].description+"")&&H(t,s)},d(n){n&&h(e)}}}function re(a){let e,s,t,n,o=[],i=new Map,l=a[5].categories;const f=r=>r[8].id;for(let r=0;r<l.length;r+=1){let _=te(a,l,r),c=f(_);i.set(c,o[r]=he(c,_))}return{c(){e=g("p"),s=g("strong"),t=I("Filed under:"),n=S();for(let r=0;r<o.length;r+=1)o[r].c()},l(r){e=E(r,"P",{});var _=w(e);s=E(_,"STRONG",{});var c=w(s);t=N(c,"Filed under:"),c.forEach(h),n=T(_);for(let D=0;D<o.length;D+=1)o[D].l(_);_.forEach(h)},m(r,_){y(r,e,_),u(e,s),u(s,t),u(e,n);for(let c=0;c<o.length;c+=1)o[c].m(e,null)},p(r,_){_&3&&(l=r[5].categories,o=_e(o,_,f,1,r,l,i,e,de,he,null,te))},d(r){r&&h(e);for(let _=0;_<o.length;_+=1)o[_].d()}}}function ce(a){let e;return{c(){e=I(",")},l(s){e=N(s,",")},m(s,t){y(s,e,t)},d(s){s&&h(e)}}}function he(a,e){let s=e[8].bookCategory.category+"",t,n=!e[1](e[0],e[7]),o,i=n&&ce();return{key:a,first:null,c(){t=I(s),i&&i.c(),o=q(),this.h()},l(l){t=N(l,s),i&&i.l(l),o=q(),this.h()},h(){this.first=t},m(l,f){y(l,t,f),i&&i.m(l,f),y(l,o,f)},p(l,f){e=l,f&1&&s!==(s=e[8].bookCategory.category+"")&&H(t,s),f&1&&(n=!e[1](e[0],e[7])),n?i||(i=ce(),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d(l){l&&h(t),i&&i.d(l),l&&h(o)}}}function ue(a){let e,s,t=a[5].id+"",n,o,i,l,f,r,_,c,D,V=a[5].title+"",O,J,j,F,G,L,M,C,R,A,Q,z,m=a[5].subtitle&&se(a),b=a[5].authors.length>0&&oe(a),p=a[5].description&&fe(a),k=a[5].categories.length>0&&re(a);function me(){return a[4](a[5])}return{c(){e=g("div"),s=g("div"),n=I(t),o=S(),i=g("div"),l=g("img"),_=S(),c=g("div"),D=g("h1"),O=I(V),J=S(),m&&m.c(),j=S(),b&&b.c(),F=S(),p&&p.c(),G=S(),k&&k.c(),L=S(),M=g("div"),C=g("button"),R=I("Delete"),A=S(),this.h()},l(P){e=E(P,"DIV",{class:!0});var d=w(e);s=E(d,"DIV",{});var K=w(s);n=N(K,t),K.forEach(h),o=T(d),i=E(d,"DIV",{});var W=w(i);l=E(W,"IMG",{src:!0,alt:!0}),W.forEach(h),_=T(d),c=E(d,"DIV",{class:!0});var B=w(c);D=E(B,"H1",{class:!0});var X=w(D);O=N(X,V),X.forEach(h),J=T(B),m&&m.l(B),j=T(B),b&&b.l(B),F=T(B),p&&p.l(B),G=T(B),k&&k.l(B),B.forEach(h),L=T(d),M=E(d,"DIV",{});var Y=w(M);C=E(Y,"BUTTON",{class:!0,type:!0});var Z=w(C);R=N(Z,"Delete"),Z.forEach(h),Y.forEach(h),A=T(d),d.forEach(h),this.h()},h(){x(l.src,f=a[5].thumbnail)||v(l,"src",f),v(l,"alt",r=a[5].title),v(D,"class","mb-2 font-bold text-xl"),v(c,"class","flex-1 w-1/4"),v(C,"class","button-danger"),v(C,"type","button"),v(e,"class","flex space-x-4 mb-8")},m(P,d){y(P,e,d),u(e,s),u(s,n),u(e,o),u(e,i),u(i,l),u(e,_),u(e,c),u(c,D),u(D,O),u(c,J),m&&m.m(c,null),u(c,j),b&&b.m(c,null),u(c,F),p&&p.m(c,null),u(c,G),k&&k.m(c,null),u(e,L),u(e,M),u(M,C),u(C,R),u(e,A),Q||(z=ge(C,"click",me),Q=!0)},p(P,d){a=P,d&1&&t!==(t=a[5].id+"")&&H(n,t),d&1&&!x(l.src,f=a[5].thumbnail)&&v(l,"src",f),d&1&&r!==(r=a[5].title)&&v(l,"alt",r),d&1&&V!==(V=a[5].title+"")&&H(O,V),a[5].subtitle?m?m.p(a,d):(m=se(a),m.c(),m.m(c,j)):m&&(m.d(1),m=null),a[5].authors.length>0?b?b.p(a,d):(b=oe(a),b.c(),b.m(c,F)):b&&(b.d(1),b=null),a[5].description?p?p.p(a,d):(p=fe(a),p.c(),p.m(c,G)):p&&(p.d(1),p=null),a[5].categories.length>0?k?k.p(a,d):(k=re(a),k.c(),k.m(c,null)):k&&(k.d(1),k=null)},d(P){P&&h(e),m&&m.d(),b&&b.d(),p&&p.d(),k&&k.d(),Q=!1,z()}}}function Ee(a){let e,s,t,n,o,i=a[0].length>0&&ie(a);return{c(){e=g("div"),s=g("a"),t=I("Create a book record"),n=S(),i&&i.c(),o=q(),this.h()},l(l){e=E(l,"DIV",{class:!0});var f=w(e);s=E(f,"A",{href:!0,class:!0});var r=w(s);t=N(r,"Create a book record"),r.forEach(h),f.forEach(h),n=T(l),i&&i.l(l),o=q(),this.h()},h(){v(s,"href","/admin/books/create"),v(s,"class","button"),v(e,"class","mb-4")},m(l,f){y(l,e,f),u(e,s),u(s,t),y(l,n,f),i&&i.m(l,f),y(l,o,f)},p(l,[f]){l[0].length>0?i?i.p(l,f):(i=ie(l),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},i:$,o:$,d(l){l&&h(e),l&&h(n),i&&i.d(l),l&&h(o)}}}function ye(a,e,s){let{data:t}=e,{books:n}=t;const o=(f,r)=>r===f.length-1,i=async f=>{if(!n.find(V=>V.id===f)){U.warning("Book not found");return}const _=await fetch("/api/books",{method:"DELETE",headers:{"content-type":"appliction/json"},body:JSON.stringify({id:f})});if(_.status>299){U.danger(`Something went wrong: ${_.status} - ${_.statusText}`);return}const c=await _.json(),D=n.filter(V=>V.id!==c.id);s(0,n=D),U.success("Success!")},l=f=>i(f.id);return a.$$set=f=>{"data"in f&&s(3,t=f.data)},[n,o,i,t,l]}class Ie extends be{constructor(e){super(),pe(this,e,ye,Ee,ke,{data:3})}}export{Ie as default};
