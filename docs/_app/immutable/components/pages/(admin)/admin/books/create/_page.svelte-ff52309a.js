import{S as re,i as ce,s as fe,k as v,a as I,e as H,l as g,m as w,h,c as O,n as u,b as q,J as f,R as Z,Q as F,T as ue,B as W,D as he,U as _e,q as $,r as j,P as x,u as V,V as de}from"../../../../../../chunks/index-7e21b56a.js";import{g as pe}from"../../../../../../chunks/navigation-d19d0f65.js";import{n as ee}from"../../../../../../chunks/notifications-ea93ec55.js";const me="AIzaSyAFJaf7c0onDXOfLtaR0w723maVB8yxPZQ";function te(c,e,l){const i=c.slice();return i[6]=e[l],i}function le(c){let e=[],l=new Map,i,t=c[1];const o=n=>n[6];for(let n=0;n<t.length;n+=1){let a=te(c,t,n),s=o(a);l.set(s,e[n]=oe(s,a))}return{c(){for(let n=0;n<e.length;n+=1)e[n].c();i=H()},l(n){for(let a=0;a<e.length;a+=1)e[a].l(n);i=H()},m(n,a){for(let s=0;s<e.length;s+=1)e[s].m(n,a);q(n,i,a)},p(n,a){a&10&&(t=n[1],e=_e(e,a,o,1,n,t,l,i.parentNode,de,oe,i,te))},d(n){for(let a=0;a<e.length;a+=1)e[a].d(n);n&&h(i)}}}function se(c){let e,l=c[6].subtitle+"",i;return{c(){e=v("h2"),i=$(l),this.h()},l(t){e=g(t,"H2",{class:!0});var o=w(e);i=j(o,l),o.forEach(h),this.h()},h(){u(e,"class","font-bold mb-4")},m(t,o){q(t,e,o),f(e,i)},p(t,o){o&2&&l!==(l=t[6].subtitle+"")&&V(i,l)},d(t){t&&h(e)}}}function ie(c){let e,l=c[6].description+"",i;return{c(){e=v("p"),i=$(l),this.h()},l(t){e=g(t,"P",{class:!0});var o=w(e);i=j(o,l),o.forEach(h),this.h()},h(){u(e,"class","mt-4")},m(t,o){q(t,e,o),f(e,i)},p(t,o){o&2&&l!==(l=t[6].description+"")&&V(i,l)},d(t){t&&h(e)}}}function ae(c){let e,l=c[6].categories.join(", ").slice(0,c[6].categories.length-1)+"",i;return{c(){e=v("p"),i=$(l)},l(t){e=g(t,"P",{});var o=w(e);i=j(o,l),o.forEach(h)},m(t,o){q(t,e,o),f(e,i)},p(t,o){o&2&&l!==(l=t[6].categories.join(", ").slice(0,t[6].categories.length-1)+"")&&V(i,l)},d(t){t&&h(e)}}}function oe(c,e){var Y;let l,i,t,o,n,a,s,r,y=e[6].title+"",E,B,A,P,N,D=((Y=e[6].authors)==null?void 0:Y.join(", "))+"",L,T,G,R,S,J,M,Q,K,_=e[6].subtitle&&se(e),d=e[6].description&&ie(e),p=e[6].categories&&e[6].categories.length>0&&ae(e);function ne(){return e[5](e[6])}return{key:c,first:null,c(){l=v("div"),i=v("div"),t=v("img"),a=I(),s=v("div"),r=v("h1"),E=$(y),B=I(),_&&_.c(),A=I(),P=v("h3"),N=$("By: "),L=$(D),T=I(),d&&d.c(),G=I(),p&&p.c(),R=I(),S=v("button"),J=$("Add"),M=I(),this.h()},l(k){l=g(k,"DIV",{class:!0});var m=w(l);i=g(m,"DIV",{class:!0});var U=w(i);t=g(U,"IMG",{src:!0,alt:!0,class:!0}),U.forEach(h),a=O(m),s=g(m,"DIV",{class:!0});var b=w(s);r=g(b,"H1",{class:!0});var z=w(r);E=j(z,y),z.forEach(h),B=O(b),_&&_.l(b),A=O(b),P=g(b,"H3",{});var C=w(P);N=j(C,"By: "),L=j(C,D),C.forEach(h),T=O(b),d&&d.l(b),G=O(b),p&&p.l(b),R=O(b),S=g(b,"BUTTON",{class:!0,type:!0});var X=w(S);J=j(X,"Add"),X.forEach(h),b.forEach(h),M=O(m),m.forEach(h),this.h()},h(){var k;x(t.src,o=((k=e[6].imageLinks)==null?void 0:k.thumbnail)||"https://via.placeholder.com/150")||u(t,"src",o),u(t,"alt",n=e[6].title),u(t,"class","w-full"),u(i,"class","flex-initial w-1/6"),u(r,"class","text-lg font-bold"),u(S,"class","mt-4 button-primary"),u(S,"type","button"),u(s,"class","flex-1"),u(l,"class","flex space-x-4 mb-8 w-full"),this.first=l},m(k,m){q(k,l,m),f(l,i),f(i,t),f(l,a),f(l,s),f(s,r),f(r,E),f(s,B),_&&_.m(s,null),f(s,A),f(s,P),f(P,N),f(P,L),f(s,T),d&&d.m(s,null),f(s,G),p&&p.m(s,null),f(s,R),f(s,S),f(S,J),f(l,M),Q||(K=F(S,"click",ne),Q=!0)},p(k,m){var U,b;e=k,m&2&&!x(t.src,o=((U=e[6].imageLinks)==null?void 0:U.thumbnail)||"https://via.placeholder.com/150")&&u(t,"src",o),m&2&&n!==(n=e[6].title)&&u(t,"alt",n),m&2&&y!==(y=e[6].title+"")&&V(E,y),e[6].subtitle?_?_.p(e,m):(_=se(e),_.c(),_.m(s,A)):_&&(_.d(1),_=null),m&2&&D!==(D=((b=e[6].authors)==null?void 0:b.join(", "))+"")&&V(L,D),e[6].description?d?d.p(e,m):(d=ie(e),d.c(),d.m(s,G)):d&&(d.d(1),d=null),e[6].categories&&e[6].categories.length>0?p?p.p(e,m):(p=ae(e),p.c(),p.m(s,R)):p&&(p.d(1),p=null)},d(k){k&&h(l),_&&_.d(),d&&d.d(),p&&p.d(),Q=!1,K()}}}function be(c){let e,l,i,t,o,n,a=c[1]&&c[1].length>0&&le(c);return{c(){e=v("form"),l=v("input"),i=I(),a&&a.c(),t=H(),this.h()},l(s){e=g(s,"FORM",{action:!0,class:!0});var r=w(e);l=g(r,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),r.forEach(h),i=O(s),a&&a.l(s),t=H(),this.h()},h(){u(l,"type","text"),u(l,"id","search"),u(l,"class","border border-slate-600 block w-full p-2"),u(l,"placeholder","Search for a book"),u(e,"action","POST"),u(e,"class","mb-4")},m(s,r){q(s,e,r),f(e,l),Z(l,c[0]),q(s,i,r),a&&a.m(s,r),q(s,t,r),o||(n=[F(l,"input",c[4]),F(e,"submit",ue(c[2]))],o=!0)},p(s,[r]){r&1&&l.value!==s[0]&&Z(l,s[0]),s[1]&&s[1].length>0?a?a.p(s,r):(a=le(s),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},i:W,o:W,d(s){s&&h(e),s&&h(i),a&&a.d(s),s&&h(t),o=!1,he(n)}}}const ve="https://www.googleapis.com/books/v1/volumes";function ge(c,e,l){let i="",t=[];const o=async()=>{const r=`${ve}?q=${i}&key=${me}`,E=await(await fetch(r)).json();l(1,t=E.items.map(B=>B.volumeInfo))},n=async r=>{const{title:y,subtitle:E,authors:B,publishedDate:A,description:P,categories:N,imageLinks:D}=r,{thumbnail:L}=D,T=await fetch("/api/books",{method:"POST",body:JSON.stringify({title:y,subtitle:E,authors:B,publishedDate:new Date(A),description:P,categories:N,thumbnail:L}),headers:{"content-type":"application/json"}});if(T.status>299){ee.warning(`Something went wrong: ${T.status} ${T.statusText}`);return}ee.success("Success!"),pe("/admin/books")};function a(){i=this.value,l(0,i)}return[i,t,o,n,a,r=>n(r)]}class Ee extends re{constructor(e){super(),ce(this,e,ge,be,fe,{})}}export{Ee as default};
